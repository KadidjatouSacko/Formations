<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistiques Détaillées - Formations Professionnelles</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .stats-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #666;
            font-size: 1.1rem;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border: none;
            padding: 12px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            color: #667eea;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .period-selector {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .period-btn {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 25px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #666;
        }

        .period-btn.active {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }

        .period-btn:hover {
            transform: translateY(-2px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(102, 126, 234, 0.3);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .stat-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .stat-icon {
            font-size: 2rem;
            opacity: 0.8;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-trend {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        .trend-positive {
            color: #28a745;
        }

        .trend-negative {
            color: #dc3545;
        }

        .trend-neutral {
            color: #6c757d;
        }

        .chart-container {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .chart-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #2c3e50;
        }

        .chart-controls {
            display: flex;
            gap: 10px;
        }

        .chart-btn {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 20px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .chart-btn.active {
            background: #667eea;
            border-color: #667eea;
            color: white;
        }

        .chart-placeholder {
            height: 300px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .chart-bars {
            display: flex;
            align-items: end;
            justify-content: space-around;
            height: 200px;
            width: 100%;
            padding: 0 20px;
        }

        .chart-bar {
            width: 40px;
            background: linear-gradient(to top, #667eea, #764ba2);
            border-radius: 5px 5px 0 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .chart-bar:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .bar-label {
            position: absolute;
            bottom: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            color: #666;
        }

        .bar-value {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 0.8rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .achievements-section {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .achievement-card {
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #856404;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .achievement-card:hover {
            transform: translateY(-5px) scale(1.02);
        }

        .achievement-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.3s ease;
        }

        .achievement-card:hover::before {
            animation: shimmer 1s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }

        .progress-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .progress-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .progress-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .progress-item {
            margin-bottom: 20px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #666;
        }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 8px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 10px;
            transition: width 1s ease;
        }

        .competency-radar {
            height: 300px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1), transparent);
            border-radius: 50%;
            position: relative;
            margin: 20px auto;
            border: 2px solid rgba(102, 126, 234, 0.2);
        }

        .radar-label {
            position: absolute;
            font-size: 0.8rem;
            font-weight: bold;
            color: #667eea;
        }

        .recent-activity {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
        }

        .activity-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .activity-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid #f1f3f4;
            transition: all 0.3s ease;
        }

        .activity-item:hover {
            background: rgba(102, 126, 234, 0.05);
            margin: 0 -15px;
            padding: 15px;
            border-radius: 10px;
        }

        .activity-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .activity-content {
            flex: 1;
        }

        .activity-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .activity-time {
            font-size: 0.8rem;
            color: #666;
        }

        .export-section {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            text-align: center;
        }

        .export-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn-outline {
            background: transparent;
            color: #667eea;
            border: 2px solid #667eea;
        }

        .btn-outline:hover {
            background: #667eea;
            color: white;
        }

        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1001;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }

        .toast.show {
            transform: translateX(0);
        }

        .fade-in {
            animation: fadeInUp 0.6s ease-out forwards;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .stats-container {
                padding: 15px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .period-selector {
                flex-direction: column;
                align-items: center;
            }
            
            .progress-section {
                grid-template-columns: 1fr;
            }
            
            .export-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <button class="back-btn" onclick="goBack()">
        ← Retour au tableau de bord
    </button>

    <div class="stats-container">
        <!-- Header -->
        <section class="header fade-in">
            <h1>📊 Statistiques Détaillées</h1>
            <p>Analysez votre progression et vos performances de formation</p>
        </section>

        <!-- Period Selector -->
        <section class="period-selector fade-in">
            <button class="period-btn active" data-period="month">Ce mois</button>
            <button class="period-btn" data-period="quarter">Ce trimestre</button>
            <button class="period-btn" data-period="year">Cette année</button>
            <button class="period-btn" data-period="all">Tout</button>
        </section>

        <!-- Key Stats -->
        <section class="stats-grid fade-in">
            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Temps d'apprentissage</span>
                    <span class="stat-icon">⏱️</span>
                </div>
                <div class="stat-value">18h 45m</div>
                <div class="stat-trend trend-positive">
                    <span>↗️</span>
                    <span>+3h cette semaine</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Score moyen</span>
                    <span class="stat-icon">🎯</span>
                </div>
                <div class="stat-value">92%</div>
                <div class="stat-trend trend-positive">
                    <span>↗️</span>
                    <span>+5% ce mois</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Formations terminées</span>
                    <span class="stat-icon">✅</span>
                </div>
                <div class="stat-value">3</div>
                <div class="stat-trend trend-positive">
                    <span>↗️</span>
                    <span>2 ce mois</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Streak d'apprentissage</span>
                    <span class="stat-icon">🔥</span>
                </div>
                <div class="stat-value">12 jours</div>
                <div class="stat-trend trend-positive">
                    <span>🔥</span>
                    <span>Record personnel !</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Certificats obtenus</span>
                    <span class="stat-icon">🏆</span>
                </div>
                <div class="stat-value">3</div>
                <div class="stat-trend trend-neutral">
                    <span>📜</span>
                    <span>Tous validés</span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <span class="stat-title">Rang dans l'établissement</span>
                    <span class="stat-icon">📈</span>
                </div>
                <div class="stat-value">#7</div>
                <div class="stat-trend trend-positive">
                    <span>↗️</span>
                    <span>+3 places</span>
                </div>
            </div>
        </section>

        <!-- Progress Chart -->
        <section class="chart-container fade-in">
            <div class="chart-header">
                <span class="chart-title">📈 Évolution du temps d'apprentissage</span>
                <div class="chart-controls">
                    <button class="chart-btn active">Semaines</button>
                    <button class="chart-btn">Mois</button>
                </div>
            </div>
            <div class="chart-placeholder">
                <div class="chart-bars">
                    <div class="chart-bar" style="height: 60%;">
                        <div class="bar-value">3h</div>
                        <div class="bar-label">S1</div>
                    </div>
                    <div class="chart-bar" style="height: 80%;">
                        <div class="bar-value">4h</div>
                        <div class="bar-label">S2</div>
                    </div>
                    <div class="chart-bar" style="height: 45%;">
                        <div class="bar-value">2h15</div>
                        <div class="bar-label">S3</div>
                    </div>
                    <div class="chart-bar" style="height: 90%;">
                        <div class="bar-value">4h30</div>
                        <div class="bar-label">S4</div>
                    </div>
                    <div class="chart-bar" style="height: 100%;">
                        <div class="bar-value">5h</div>
                        <div class="bar-label">S5</div>
                    </div>
                    <div class="chart-bar" style="height: 70%;">
                        <div class="bar-value">3h30</div>
                        <div class="bar-label">S6</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Progress by Formation -->
        <section class="progress-section fade-in">
            <div class="progress-card">
                <h3 class="progress-title">🎯 Progression par formation</h3>
                
                <div class="progress-item">
                    <div class="progress-label">
                        <span>Communication & Relationnel</span>
                        <span>100%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-label">
                        <span>Hygiène & Sécurité</span>
                        <span>100%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 100%;"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-label">
                        <span>Premiers Secours</span>
                        <span>80%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 80%;"></div>
                    </div>
                </div>

                <div class="progress-item">
                    <div class="progress-label">
                        <span>Gestion du Stress</span>
                        <span>0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 0%;"></div>
                    </div>
                </div>
            </div>

            <div class="progress-card">
                <h3 class="progress-title">🧠 Compétences développées</h3>
                <div class="competency-radar">
                    <div class="radar-label" style="top: 10%; left: 50%; transform: translateX(-50%);">Communication (95%)</div>
                    <div class="radar-label" style="top: 25%; right: 15%;">Sécurité (90%)</div>
                    <div class="radar-label" style="bottom: 25%; right: 15%;">Technique (75%)</div>
                    <div class="radar-label" style="bottom: 10%; left: 50%; transform: translateX(-50%);">Organisation (80%)</div>
                    <div class="radar-label" style="bottom: 25%; left: 15%;">Relationnel (95%)</div>
                    <div class="radar-label" style="top: 25%; left: 15%;">Gestion (70%)</div>
                </div>
            </div>
        </section>

        <!-- Achievements -->
        <section class="achievements-section fade-in">
            <h3 class="progress-title">🏆 Réussites et badges obtenus</h3>
            <div class="achievements-grid">
                <div class="achievement-card">
                    <div style="font-size: 2rem; margin-bottom: 10px;">🎯</div>
                    <div style="font-weight: bold;">Expert Communicant</div>
                    <div style="font-size: 0.8rem;">Score parfait en communication</div>
                </div>
                <div class="achievement-card">
                    <div style="font-size: 2rem; margin-bottom: 10px;">⚡</div>
                    <div style="font-weight: bold;">Apprenant Rapide</div>
                    <div style="font-size: 0.8rem;">3 formations en 1 mois</div>
                </div>
                <div class="achievement-card">
                    <div style="font-size: 2rem; margin-bottom: 10px;">🔥</div>
                    <div style="font-weight: bold;">Streak Master</div>
                    <div style="font-size: 0.8rem;">10+ jours consécutifs</div>
                </div>
                <div class="achievement-card">
                    <div style="font-size: 2rem; margin-bottom: 10px;">🎓</div>
                    <div style="font-weight: bold;">Perfectionniste</div>
                    <div style="font-size: 0.8rem;">90%+ de moyenne</div>
                </div>
            </div>
        </section>

        <!-- Recent Activity -->
        <section class="recent-activity fade-in">
            <h3 class="progress-title">📋 Activité récente</h3>
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-icon">🎉</div>
                    <div class="activity-content">
                        <div class="activity-title">Formation "Communication & Relationnel" terminée</div>
                        <div class="activity-time">Aujourd'hui à 14h30</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">📜</div>
                    <div class="activity-content">
                        <div class="activity-title">Certificat "Communication" téléchargé</div>
                        <div class="activity-time">Aujourd'hui à 14h35</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">▶️</div>
                    <div class="activity-content">
                        <div class="activity-title">Module "Gestion des hémorragies" commencé</div>
                        <div class="activity-time">Hier à 16h20</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">✅</div>
                    <div class="activity-content">
                        <div class="activity-title">Quiz "Réanimation cardio-pulmonaire" réussi</div>
                        <div class="activity-time">Avant-hier à 10h15</div>
                    </div>
                </div>
                <div class="activity-item">
                    <div class="activity-icon">🎯</div>
                    <div class="activity-content">
                        <div class="activity-title">Badge "Expert Communicant" débloqué</div>
                        <div class="activity-time">Il y a 3 jours</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Export Section -->
        <section class="export-section fade-in">
            <h3 class="progress-title">💾 Exporter mes statistiques</h3>
            <p style="color: #666; margin-bottom: 20px;">
                Téléchargez un rapport détaillé de votre progression et de vos résultats
            </p>
            <div class="export-buttons">
                <button class="btn" onclick="exportToPDF()">
                    📄 Export PDF
                </button>
                <button class="btn btn-outline" onclick="exportToExcel()">
                    📊 Export Excel
                </button>
                <button class="btn btn-outline" onclick="shareProgress()">
                    🔗 Partager
                </button>
            </div>
        </section>
    </div>

    <!-- Toast notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Fonctions interactives
        function goBack() {
            showToast('🏠 Retour au tableau de bord...');
            setTimeout(() => {
                window.location.href = 'dashboard-updated.html';
            }, 1000);
        }

        function exportToPDF() {
            showToast('📄 Génération du rapport PDF en cours...');
            setTimeout(() => {
                alert('📄 Rapport PDF généré !\n\n📊 Contenu :\n• Statistiques générales\n• Progression par formation\n• Historique des résultats\n• Certificats obtenus\n• Analyses de performance\n\n✅ Le fichier a été sauvegardé dans vos téléchargements');
            }, 2000);
        }

        function exportToExcel() {
            showToast('📊 Génération du fichier Excel en cours...');
            setTimeout(() => {
                alert('📊 Fichier Excel généré !\n\n📈 Données incluses :\n• Scores détaillés par module\n• Temps passé par formation\n• Évolution mensuelle\n• Comparaisons avec la moyenne\n\n✅ Le fichier a été sauvegardé dans vos téléchargements');
            }, 2000);
        }

        function shareProgress() {
            showToast('🔗 Génération du lien de partage...');
            setTimeout(() => {
                const shareText = `🎓 Mes progrès en formation :\n\n✅ 3 certifications obtenues\n📊 Score moyen : 92%\n⏱️ 18h45 d'apprentissage\n🔥 12 jours de streak\n\n#FormationProfessionnelle #Apprentissage`;
                
                if (navigator.share) {
                    navigator.share({
                        title: 'Mes statistiques de formation',
                        text: shareText,
                        url: window.location.href
                    });
                } else {
                    navigator.clipboard.writeText(shareText).then(() => {
                        alert('🔗 Lien de partage copié !\n\nLe texte suivant a été copié dans votre presse-papiers :\n\n' + shareText);
                    });
                }
            }, 1500);
        }

        // Gestion des onglets de période
        document.querySelectorAll('.period-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                
                const period = e.target.dataset.period;
                updateStatsByPeriod(period);
                showToast(`📊 Statistiques mises à jour pour : ${getPeriodName(period)}`);
            });
        });

        // Gestion des boutons de contrôle du graphique
        document.querySelectorAll('.chart-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                document.querySelectorAll('.chart-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                showToast(`📈 Graphique mis à jour : ${e.target.textContent}`);
            });
        });

        function getPeriodName(period) {
            const periods = {
                'month': 'Ce mois',
                'quarter': 'Ce trimestre', 
                'year': 'Cette année',
                'all': 'Toute la période'
            };
            return periods[period];
        }

        function updateStatsByPeriod(period) {
            // Simulation de la mise à jour des statistiques selon la période
            const stats = {
                month: {
                    time: '6h 20m',
                    score: '94%',
                    formations: '1',
                    streak: '12 jours'
                },
                quarter: {
                    time: '18h 45m',
                    score: '92%',
                    formations: '3',
                    streak: '12 jours'
                },
                year: {
                    time: '45h 15m',
                    score: '89%',
                    formations: '8',
                    streak: '25 jours'
                },
                all: {
                    time: '67h 30m',
                    score: '91%',
                    formations: '12',
                    streak: '35 jours'
                }
            };

            const currentStats = stats[period];
            document.querySelectorAll('.stat-value')[0].textContent = currentStats.time;
            document.querySelectorAll('.stat-value')[1].textContent = currentStats.score;
            document.querySelectorAll('.stat-value')[2].textContent = currentStats.formations;
            document.querySelectorAll('.stat-value')[3].textContent = currentStats.streak;
        }

        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Animation d'entrée progressive
        document.addEventListener('DOMContentLoaded', () => {
            const elements = document.querySelectorAll('.fade-in');
            elements.forEach((element, index) => {
                element.style.animationDelay = `${index * 0.1}s`;
            });

            // Animation des barres de progression
            setTimeout(() => {
                document.querySelectorAll('.progress-fill').forEach(fill => {
                    fill.style.width = fill.style.width;
                });
            }, 500);

            // Animation des barres du graphique
            setTimeout(() => {
                document.querySelectorAll('.chart-bar').forEach((bar, index) => {
                    bar.style.animationDelay = `${index * 0.1}s`;
                    bar.style.animation = 'growUp 0.8s ease-out forwards';
                });
            }, 1000);

            showToast('📊 Statistiques chargées avec succès !');
        });

        // Animation pour les barres du graphique
        const style = document.createElement('style');
        style.textContent = `
            @keyframes growUp {
                from { height: 0; }
                to { height: var(--target-height); }
            }
        `;
        document.head.appendChild(style);

        // Définir les hauteurs cibles pour l'animation
        document.querySelectorAll('.chart-bar').forEach(bar => {
            const height = bar.style.height;
            bar.style.setProperty('--target-height', height);
            bar.style.height = '0';
        });

        // Interaction avec les éléments du radar de compétences
        document.querySelector('.competency-radar').addEventListener('click', () => {
            showToast('🧠 Analyse détaillée des compétences disponible dans le rapport PDF');
        });

        // Animation au survol des cartes de statistiques
        document.querySelectorAll('.stat-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                const icon = card.querySelector('.stat-icon');
                icon.style.transform = 'scale(1.2) rotate(10deg)';
            });
            
            card.addEventListener('mouseleave', () => {
                const icon = card.querySelector('.stat-icon');
                icon.style.transform = 'scale(1) rotate(0deg)';
            });
        });

        // Fonction pour simuler le chargement de données
        function loadStatsData() {
            showToast('🔄 Actualisation des données...');
            
            // Simuler un délai de chargement
            setTimeout(() => {
                // Ici on pourrait faire un appel API réel
                showToast('✅ Données mises à jour !');
            }, 1500);
        }

        // Gestion du clique sur les éléments d'activité récente
        document.querySelectorAll('.activity-item').forEach(item => {
            item.addEventListener('click', () => {
                const title = item.querySelector('.activity-title').textContent;
                showToast(`📋 Détails : ${title}`);
            });
        });

        // Fonction d'actualisation automatique (toutes les 5 minutes)
        setInterval(() => {
            // En production, cela ferait un appel API pour récupérer les dernières données
            console.log('🔄 Vérification automatique des nouvelles données...');
        }, 300000); // 5 minutes

        // Sauvegarde automatique des préférences de vue
        function saveViewPreferences() {
            const activePeriod = document.querySelector('.period-btn.active').dataset.period;
            const activeChart = document.querySelector('.chart-btn.active').textContent;
            
            localStorage.setItem('statsPreferences', JSON.stringify({
                period: activePeriod,
                chartType: activeChart,
                lastVisit: new Date().toISOString()
            }));
        }

        // Restauration des préférences au chargement
        function loadViewPreferences() {
            const saved = localStorage.getItem('statsPreferences');
            if (saved) {
                const prefs = JSON.parse(saved);
                // Appliquer les préférences sauvegardées
                const periodBtn = document.querySelector(`[data-period="${prefs.period}"]`);
                if (periodBtn) {
                    document.querySelector('.period-btn.active').classList.remove('active');
                    periodBtn.classList.add('active');
                    updateStatsByPeriod(prefs.period);
                }
            }
        }

        // Charger les préférences au démarrage
        setTimeout(loadViewPreferences, 100);

        // Sauvegarder les préférences lors des changements
        document.querySelectorAll('.period-btn, .chart-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                setTimeout(saveViewPreferences, 100);
            });
        });

        // Fonction pour détecter les nouveaux achievements
        function checkForNewAchievements() {
            const achievements = [
                { name: 'Marathon Learner', condition: 'Plus de 20h d\'apprentissage' },
                { name: 'Quiz Master', condition: 'Tous les quiz réussis du premier coup' },
                { name: 'Speed Runner', condition: 'Formation terminée en moins de 2 jours' }
            ];
            
            // Simulation de détection d'un nouvel achievement
            const randomAchievement = achievements[Math.floor(Math.random() * achievements.length)];
            
            if (Math.random() < 0.1) { // 10% de chance
                setTimeout(() => {
                    showToast(`🎉 Nouveau badge débloqué : ${randomAchievement.name} !`);
                }, 3000);
            }
        }

        // Vérifier les nouveaux achievements après le chargement
        setTimeout(checkForNewAchievements, 2000);
    </script>
</body>
</html>